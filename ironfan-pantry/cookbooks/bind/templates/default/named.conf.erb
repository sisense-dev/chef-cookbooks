# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
<% ( node['bind']['etc_cookbook_files'] | node['bind']['etc_template_files'] ).each do |file| -%>
include "<%= "#{node['bind']['sysconfdir']}/#{file}" %>";
<% end -%>

controls {
         inet 127.0.0.1 allow { localhost; }
         keys { rndc-key; };
};

<% @zones.uniq.each do |zone| -%>
zone "<%= zone %>" in {
  type <%= node['bind']['zonetype'] %>;
  <% if node['bind']['zonetype'] == "master" %> 
  file "<%= node['bind']['vardir'] %>/db.<%= zone %>";
  <% else %>
  file "slaves/db.<%= zone %>";
  masters { default; };  
  <% end %>
};

<% end -%>

zone "." IN {
  type hint;
  file "named.ca";
};
