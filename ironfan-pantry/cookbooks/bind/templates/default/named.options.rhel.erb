# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.

<% @bind_acls.each do |acl| -%>
acl "<%= acl['id'] -%>" {
  <% acl['hosts'].each do |host| -%>
  <%= host -%>;
  <% end -%>
};

<% end -%>

masters default { <% node['bind']['masters'].each do |host| -%><%= host -%>; <% end -%> };

options {
  listen-on port 53 { any; };
  listen-on-v6 port 53 { ::1; };
  directory "<%= node['bind']['vardir'] %>";
  dump-file "data/cache_dump.db";
  statistics-file "data/named_stats.txt";
  memstatistics-file "data/named_mem_stats.txt";
  allow-query { any; };
  allow-update { key "rndc-key."; };
  <% if node['bind']['ipv6_listen'] -%>listen-on-v6 { any; };<% end -%>
  <% node['bind']['options'].each do |option_line| -%>
  <%= option_line %>
  <% end -%>
};
